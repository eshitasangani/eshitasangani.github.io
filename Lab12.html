<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>ECE 4160: Lab 12</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Eshita Sangani</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/profile.jpg" alt="..." /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="index.html">About</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab1.html">Lab 1</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab2.html" >Lab 2</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab3.html" >Lab 3</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab4.html">Lab 4</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab5.html">Lab 5</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab6.html">Lab 6</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab7.html">Lab 7</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab8.html">Lab 8</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab9.html">Lab 9</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab10.html">Lab 10</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab11.html">Lab 11</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab12.html" style="color: rgb(31, 78, 47);">Lab 12</a></li>
                </ul>
            </div>
        </nav>
    <!-- Page Content-->
    <section class="resume-section" id="experience">
        <div class="resume-section-content">
            <h2 class="mb-2">Lab 12<span class="text-primary">PATH PLANNING AND EXECUTION</span></h2>
            <p class="mb-5">
                
                Woo! The purpose of this lab is to combine everything that we have learned from the 
                previous 11!! labs to be able navigate our robot through a maze
                while hitting the waypoints that were specified. The final lab! 

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0"> Design Approach</h3>
                    
                    <p>
                        The spots on the map (below) that have an orange tap on them
                        are the spots that we needed to hit. I also worked with grace on this lab! 
                    </p>
                    <p> 
                        <img src="assets/fullmap.jpg" alt="..." width="55%" />
                    </p>
                    <p>
                        This is the planned trajectory that I had. 
                    </p>
                    <p> 
                        <img src="assets/plannedmap.jpg" alt="..." width="55%" />
                    </p>
                    <p> 
                        I decided to implement PID control to help the robot navigate 
                        through the maze. When planning out my code, I wanted 
                        break up the sections into discrete chunks to be able to 
                        incrementally test 
                    </p>
                    <p> 
                        To achieve this, I designed 3 main arduino functions - 
                        FORWARD, TURN_POS_90, and TURN_NEG_90. Diving into the 
                        implementation -> 
                    </p>

                    <p> 
                        FORWARD: This command will stop the car after reaching a set distance. 
                        This function takes in the KP value + target distance - so it 
                        can be adapted for multiple sections of the map and I would not 
                        have to re upload the code. The steps go as follows: 
                        1. Receive KP + Target distance
                        2. Receive TOF sensor data 
                        3. Calculate error and adjust movement scale in accordance 
                        4. Move forwards/backwards according to PID 
                        I only used a P controller to avoid integrator windup and also 
                        less overshoot. The code for this command is seen below. 

                    </p>
                    <p> 
                        <script src="https://gist.github.com/eshitasangani/12422db70345b87903d7eda6031b1221.js"></script>
                    </p>
                    <p> 
                        TURN_POS_90: This command turn the car CW a specific value by adapting
                        the code from Lab 9. The car keeps track of its angular position by 
                        with the angular velocity found from the gyroscope. 
                        This function also takes in the KP value + target distance.  
                        1. Receive KP + Target angle
                        2. Receive IMU gyroscope data
                        3. Calculate error and adjust movement scale in accordance 
                        4. Move according to PID 
                        The code for this command is seen below. 
                    </p>
                    <p> 
                        <script src="https://gist.github.com/eshitasangani/c70ce1d97e23895ff3ca76277d640ad1.js"></script>
                    </p>

                    <p> 
                        TURN_NEG_90: This command turn the car CCW a specific value by adapting
                        the code from Lab 9. The car keeps track of its angular position by 
                        with the angular velocity found from the gyroscope. 
                        This function also takes in the KP value + target distance.  
                        1. Receive KP + Target angle
                        2. Receive IMU gyroscope data
                        3. Calculate error and adjust movement scale in accordance 
                        4. Move according to PID 
                        The code for this command is seen below. 
                    </p>
                    <p> 
                        <script src="https://gist.github.com/eshitasangani/1b3fea9fe4159a346a56c43b667ea1a9.js"></script>
                    </p>
                    <p> 
                        After initalizing all these commands and testing them on the side, I 
                        then moved to the map to begin to attack the pathway. On the python side,
                        this required a lot of tuning due to environmental factors. 
                    </p>

                    <iframe width="560" height="315" src="https://www.youtube.com/embed/0bl1DVT70Ws"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>

                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">JUPYTER SIDE </h3>
                    <p> 
                       These are the final commands that I ended up settling on 
                       after multiple hours of tuning!
                    </p>
                    <p> 
                        <script src="https://gist.github.com/eshitasangani/5d1d1dc69c11e30df3a25f1f0f06e516.js"></script>
                    </p>

                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">CHALLENGES + TESTING </h3>
                    <p> 
                       Tuning the Jupyter side was the hardest part. The Arduino 
                       side only required some manipulation of the setup to 
                       ensure there was no slowdown or noise from the sensors. 
                       Since I had paramterized the KP value + distance, 
                       each waypoint required precise tuning of the values to 
                       make sure that I had the expected path. I started off 
                       calculating the values for each waypoint individually, 
                       but after I had those tuned perfectly, I struggled with the integration.
                       Since I only used PID control, the ending position of one waypoint 
                       was not necessarily the best starting point of the other waypoint. 
                       That led to me having to retune the parameters for each one. 
                       Then I decided to do the pathway in chunks - hoping that would 
                       allow for some easier integration. That ended up being the best 
                       strategy expect then both artemis + motor batteries starting glitching, I lost a TOF 
                       sensor (rip), and the lab slowly became more dense. 
                    </p>

                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">RESULTS</h3>
                    <p>
                        These are the results for the 3 sections that I worked on - 
                        as seen they are pretty accurate on their own which was really 
                        exciting for me. 
                    </p>

                    <iframe width="560" height="315" src="https://www.youtube.com/embed/QHavPojS18Q"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>

                    <iframe width="560" height="315" src="https://www.youtube.com/embed/NnKQ5tEa9so"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>

                    <iframe width="560" height="315" src="https://www.youtube.com/embed/_Vp-ZRpseTE"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>

                        <iframe width="560" height="315" src="https://www.youtube.com/embed/XxE2wXT6dtM"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>

                    <p>
                        As for a complete run, I was not able to get the perfect and 
                        ideal run I wanted 
                        because of the density and length of my fellow lab mates trials and also 
                        because of travel constraints. HOWEVER, all hope was not lost -> 
                        I ended up getting 2 pretty solid runs that I was happy with consdering 
                        the hardware issues I have been facing. These are seen below. 
                    </p>

                    <iframe width="560" height="315" src="https://www.youtube.com/embed/_dhnrkCMWhM"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>
                        
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/D0mpQAXa9qM"
                        title="YouTube video player" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>

                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">REFLECTION & ACKNOWLEDGEMENTS</h3>
                    <p>
                        Thank you so much to all the wonderful TA's for having so many lab 
                        hours and for all their help + Professor Petersen for the course + lectures.
                        This was a really challenging course but I learned a lot about robotics 
                        and met some really cool people, so for that I will be forever grateful.
                        Special thank you to Anya + Johnathan, my lab TAs, for explaining 
                        various concepts to me and being supportive and encouraging 
                        when my robot would fail. See ya next time!!! :) 
                     </p>
                
                </div>
            </div>

        </div>
    </section>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
</body>

</html>