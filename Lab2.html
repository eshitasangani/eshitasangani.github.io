<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>ECE 4160: Lab 1</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Eshita Sangani</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/profile.jpg" alt="..." /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="index.html">About</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab1.html">Lab 1</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab2.html" style="color: rgb(31, 78, 47);">Lab 2</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab3.html">Lab 3</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab4.html">Lab 4</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab5.html">Lab 5</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab6.html">Lab 6</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab7.html">Lab 7</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab8.html">Lab 8</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab9.html">Lab 9</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab10.html">Lab 10</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab11.html">Lab 11</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab12.html">Lab 12</a></li>
                </ul>
            </div>
        </nav>
    <!-- Page Content-->
    <section class="resume-section" id="experience">
        <div class="resume-section-content">
            <h2 class="mb-2">Lab 2 <span class="text-primary">Bluetooth Communication</span></h2>
            <p class="mb-5">The purpose of this lab was to set up communicaton between the computer and the Artemis nano using the bluetooh stack.
                For the Artemis side of the communication, the Arduino IDE was used and for the computer side, Python was used through Jupyter Lab. 
                The main task in this lab was to understand how to send, receive, and interpret commands and data. 
            </p>
            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">BLE Overview</h3>
                    <p> 
                        The BLE (Bluetooth Low Energy) library is a more energy efficient and optimized version of Bluetooth and is used in situations 
                        that don't need to exchange/send large amounts of data. It exists within arduino and already contains the necessary hardware 
                        support. 
                    </p>
                    <h4 class="mb-0">Artemis Side </h3>
                    <p> 
                        The ArduinoBLE library was installed within the IDE and its main file, ble_arduino.ino example was the base of this lab. 
                        When running the sketch, the Artemis' MAC address was printed to the serial monitor. 

                    </p>
                    <h4 class="mb-0">Computer Side</h3>
                        <p> 

                            Python was the main language that was used along with its packages such as numpy, pyyaml, colorama,
                            nest_asyncio, and bleak. A virtual environment was also used to ensure that there were no dependency 
                            errors and each student's machine had the appropiate packages and libraries. In this case, 
                            the FastRobots_ble environment was used. These were installed using these 
                            commands: 
                            <script src="https://gist.github.com/eshitasangani/b4b75dd92bd24703474d891b3ace8ce4.js"></script>
                        </p>
                    
                    <h4 class="mb-0">Communication between Artemis and Computer</h3>
                        <p> 
                            Checking that the MAC address printed on the Artemis and computer side was the same is how 
                            the bluetooh connectivity was verified. Within the codebase, a demo.ipynb file setup the bluetooth 
                            connection. To define the addresses, UUIDS (Universally Unique Identifiers) was used which helps 
                            differentiate between the types of data being sent. A new UUID was created and inserted in the appropiate 
                            connections file. The MAC address of the artemis was added to the connections file as well. The result of 
                            this communiction is below: 
                            <p>
                                On the computer side: 
                            </p>
                            <p> 
                            <img src="assets/computer_connection.jpg" alt="..." width="90%" />
                            </p>
                            <p>
                                On the Artemis side: 
                            </p>
                            <p>
                                <img src="assets/artemis.jpg" alt="..." width="100%" /> 
                            </p>
                            
                        <p>
                            Here are a few examples of sending + receiving commands. 
                            This is how the commands are sent on the computer side: 
                        </p>
                        <p>
                            <img src="assets/comp_send.jpg" alt="..." width="90%" />
                        </p>
                            <p>
                                This is how they were received on the artemis side. 
                            </p>
                            <img src="assets/commands.jpg" alt="..." width="85%" />

                        </p>
                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">ECHO Command</h3>
                    <p> 
                    To add a new command, the arduino sketch, the cmd_types file, as well as the demo.ipynb file needed 
                    to be updated. For this command, the Artemis needed to "echo" the message that it had 
                    received back to the computer. was. For example, if I were to send "Hello!", 
                    the Artemis should send back Robot says -> "Hello!". 
                    </p> 
                    <p> 
                    If the echo command with the text " Hi Hello" is sent as seen below, we can see that when 
                    we ask to receive the command, the same text is sent back, with the addition of "Robot says."
                    </p> 
                    <img src="assets/echocomputer.jpg" alt="..." width="55%" />
                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">GET_TIME_MILLIS Command</h3>
                    <p> Similarily to the echo command. I updated the necessary files to add the GET_TIME_MILLIS command.
                        This command would send the time in milliseconds back to the computer when the command is received.
                        
                    </p>
                    <p> 
                        When the command is called from the python side, this is what is received: 
                    </p>
                    <p> 
                        <img src="assets/gettimemillis_com.jpg" alt="..." width="55%" />
                    </p>
                    
                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">GET_TEMP_5s Command</h3>
                   
                    <p> 
                        The GET_TEMP_5s command will use the onboard temperature sensor to send 
                        a time stamped temperature reading back to the computer which is taken once 
                        every second for five consecutive seconds. 
                    </p>
                    <p> 
                        When implementing this command, a notification handler was also incorporated 
                        to ensure that the value that was being received was the most updated reading. 
                        The implementation of the temperature sensor will be discussed in the following
                        sections. 
                    </p>
                    <p> 
                        <img src="assets/get5s.jpg" alt="..." width="55%" />
                    </p>
                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">GET_TEMP_5s_RAPID Command</h3>
                 
                    <p> 
                        The GET_TEMP_5s_RAPID command will also use the onboard temperature sensor 
                        to send an array of rapdily sampled temperature readings. It usually sends 300-350 
                        points. The notification handler was used for this command as well.  
                    </p>
                    
                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">Notification Handler</h3>
                   
                    <p> 
    
                        For the earlier commands, only one variable was responsible for receiving the 
                        appropiate values. For the last two temperature commands, the temperature readings 
                        were being sent rapidly and we also wanted to know when the value is being updated. 
                    </p>
                    <p> 
                        To implement this, a global variable was used that is able to be constanly updated 
                        by built in functions - start_notify() and stop_notify(). When called, start_notify()
                        will constantly check if the global value is being updated and will print the most updated value 
                        when needed. The function start_notify() takes in two parameters - a UUID (mentioned 
                        previously) and a callback function. A callback function is  function passed into 
                        another function as an argument, which then is called inside the other function
                        to execute its contents. The callback function takes in the uuid, and then a byte array 
                        After converting the byte array to a string value, it is then assigned to the global
                        variable. Then the stop_notify() function is ran after you want to stop checking for 
                        new values being received. 
                    </p>
                    <p> 
                        Add more here
                    </p> 
                </div>
            </div>

            

        </div>
    </section>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
</body>

</html>