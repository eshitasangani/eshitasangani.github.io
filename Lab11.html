<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>ECE 4160: Lab 11</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Eshita Sangani</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/profile.jpg" alt="..." /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="index.html">About</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab1.html">Lab 1</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab2.html" >Lab 2</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab3.html" >Lab 2</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab4.html">Lab 4</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab5.html">Lab 4</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab6.html">Lab 6</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab7.html">Lab 7</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab8.html">Lab 8</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab9.html">Lab 9</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab10.html">Lab 10</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab11.html" style="color: rgb(31, 78, 47);">Lab 11</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="Lab12.html">Lab 12</a></li>
                </ul>
            </div>
        </nav>
    <!-- Page Content-->
    <section class="resume-section" id="experience">
        <div class="resume-section-content">
            <h2 class="mb-2">Lab 11 <span class="text-primary"> LOCALIZATION IRL </span></h2>
            <p class="mb-5">
                The purpose of this lab is to take what we learned from Lab 10 
                and then be able to localize on my actual robot using an optimized 
                version of the code. I used my data from lab 9 to simulate the Bayes 
                Filter on the robot since those readings were collected at every point 
                through spinning on its axis. 
                </p>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0"> LOCALIZATION SIMULATION</h3>
               
                    <p>
                        I started off with testing the localization simulation that was 
                        provided to us and this is what it resulted in. 
                    </p>
                    
                    <p> 
                        <img src="assets/simrun.jpg" alt="..." width="55%" />
                    </p>
                    <p> 
                        The green trajectory is the ground truth 
                        path. The blue path is the trajectory according to the 
                        robot's belief. The red path is the trajectory based on solely 
                        the odometry data. Some differences could be because of the slight 
                        change of the rectuangular grid and the belief map. 
                    </p>

                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">OBSERVATION LOOP </h3>
                    <p> 
                       After that visualization, I went through the skeleton 
                       jupyter notebook that was provided to begin to integrate 
                       the robot with the localization code. This meant that I 
                       had to implement the perform_observation_loop
                       function of the class RealRobot. This function 
                       performs the loop behavior by having the robot do a 360 
                       degree turn while collecting angular sensor data beginning 
                       from the same orientation every time. 
                    </p>
                    <p> 
                        To integrate with the simulator, I needed 18 points 
                        of data at each marked point. From lab 9, my code 
                        recorded a 15 measurements every second for a total of 
                        150 data points and usually in increments of 40 degrees. 
                        This data was not accurate enough for the observation loop 
                        function so I adapted the Arduino code to maintain 
                        a spin of 20 degrees per second on the PID side. This code snippet is pasted below. 
                     </p>
                     <p>
                        <script src="https://gist.github.com/eshitasangani/b5276ca0e6e20bab44566358d45e27e7.js"></script>
                     </p>

                     <p>
                        Because of the map from Lab 9 being very poor after having good polar plots, 
                        I also adjusted the bluetooth command itself to collect data at specific values 
                        instead of all the time and then having to do the post processing. After 
                        making sure I have the angle I want, then only do I execute the PID 
                        and send the command over via bluetooth. This code snippet is seen below. 
                     </p>

                     <p>
                        <script src="https://gist.github.com/eshitasangani/fcce6fde987a36f7ff3a5ebc0c491ef3.js"></script>
                     </p>

                     <p>
                        After all of this - I finally implemented this all within my perform_observation_loop function 
                        with the associated notification handler as seen in this code snippet below. 
                     </p>

                     <p>
                        <script src="https://gist.github.com/eshitasangani/1d6840bf80b7f973e6049cb3c874267a.js"></script>
                     </p>

                </div>
            </div>

            <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                <div class="flex-grow-1">
                    <h3 class="mb-0">RUNNING LOCALIZATION</h3>
                    <p>
                        (5,-3)
                    </p>
                    <p>
                        ###
                    </p>
                    <p>
                        (5,3)
                    </p>
                    <p>
                        ###
                    </p>
                    <p>
                        (0,3)
                    </p>
                    <p>
                        ###
                    </p>
                    <p>
                        (-3,-2)
                    </p>
                    <p>
                        ###
                    </p>
                    <p>
                        -----------------------------------------------------------------------------
                    </p>
                    <p>
                        Surprisingly enough, the robot was better at localizing 
                    </p>

                </div>
            </div>


        </div>
    </section>

    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Core theme JS-->
    <script src="js/scripts.js"></script>
</body>

</html>